<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Preprocessing Audio with Rthoptera • Rthoptera</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Preprocessing Audio with Rthoptera">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">Rthoptera</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/Rthoptera.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Apps.html">Launching Shiny Apps with Rthoptera</a></li>
    <li><a class="dropdown-item" href="../articles/Compare.html">Comparing Rthoptera with other workflows</a></li>
    <li><a class="dropdown-item" href="../articles/Preprocess.html">Preprocessing Audio with Rthoptera</a></li>
    <li><a class="dropdown-item" href="../articles/Summarize.html">Summarizing Data with Rthoptera</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/naturewaves/Rthoptera/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Preprocessing Audio with Rthoptera</h1>
                        <h4 data-toc-skip class="author">NatureWaves</h4>
            
            <h4 data-toc-skip class="date">2024-10-02</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/naturewaves/Rthoptera/blob/HEAD/vignettes/Preprocess.Rmd" class="external-link"><code>vignettes/Preprocess.Rmd</code></a></small>
      <div class="d-none name"><code>Preprocess.Rmd</code></div>
    </div>

    
    
<p><img src="../reference/figures/Rthoptera_logo_darkgrey.png" style="width:20.0%"></p>
<p>There are many reasons why bioacousticians edit their recordings
before analyzing them. This is especially true when working with field
recordings, where non-target sounds may obscure the analyses, often
occupying frequencies below the signal of interest. In other cases, the
field recordist used an ultrasonic microphone and a high sampling rate
(e.g., 128 kHz, 384 kHz) and the recorded insect happened to sing well
below the Nyquist frequency (half the sampling rate). Sometimes the
insect doesn’t call very often, forcing us to monitor for long periods
of silence without stopping the recording. In all these cases, we might
want to preprocess our recordings. <strong><em>Rthoptera</em></strong>
offers interactive apps to deal with most of these issues, minimizing
the need for multiple software in your workflow.</p>
<p>DISCLAIMER: R is not optimized for rendering large amounts of data in
plots. If you have long sound files (&gt; 1 min) recorded at high
sampling rates (&gt; 48 kHz), you might want to subset them with a
dedicated audio software before importing them into R, unless you have a
lot of patience or a very capable computer. A popular free audio editor
is Audacity.</p>
<p>In this guide, we will work with the example Wave objects included in
the package. If you want to work with a single file of the included
data, you can run, for example:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Uncheck the line below if you haven't installed RthopteraSounds</span></span>
<span><span class="co">#remotes::install_github("naturewaves/RthopteraSounds")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">RthopteraSounds</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"tettigonia"</span><span class="op">)</span></span></code></pre></div>
<p>which will make the song of <em>Tettigonia cantans</em> available in
the R environment.</p>
<p>To load all of them at once, run this:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/RthopteraSounds/man/load_rthoptera_data.html" class="external-link">load_rthoptera_data</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>To use your own recordings you should run</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/launch_app.html">launch_app</a></span><span class="op">(</span><span class="st">"import_wave"</span><span class="op">)</span></span></code></pre></div>
<p>which will allow you to select, name and import sound files as R
objects of class “Wave”. This app uses the <code><a href="https://rdrr.io/pkg/tuneR/man/readWave.html" class="external-link">readWave()</a></code>
function from the <code>tuneR</code> package.</p>
<p>Now you can use the different apps to preprocess the Wave before
analysis, including trimming, filtering, and downsampling. All the
preprocessing apps in <strong><em>Rthoptera</em></strong> produce
blueprint-like plots to remind users that these are not intended for
publication, but instead to aid in decision-making on the edits.</p>
<p>As a rule of thumb, if you want to analyze several snippets of a
recording separately, you should first evaluate if you need to do any
filtering or downsampling before extracting the cuts to avoid repeating
the process for each. If you want to analyze a single snippet from the
wave file, you might want to trim it before filtering, which will
optimize processing time for the other editing steps.</p>
<div class="section level3">
<h3 id="trim">Trim<a class="anchor" aria-label="anchor" href="#trim"></a>
</h3>
<p>This app works with <code>tuneR</code>’s <code><a href="https://rdrr.io/pkg/tuneR/man/extractWave.html" class="external-link">extractWave()</a></code>
function, which has an interactive option but it is not accurate in the
selection of snippets. To trim a Wave, run the app, plot the
oscillogram, select the portion you want to save, type a name for it,
and save it. You can overwrite the original Wave by assigning the same
name for the selection (this will not have any effect outside the R
environment), or assign a new name to create a new Wave object.If you
want to save several snippets of the same length, just drag the first
selection to the desired position and assign a new name before
saving.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/launch_app.html">launch_app</a></span><span class="op">(</span><span class="st">"trim"</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="../reference/figures/trim.gif" alt="Fig.1. How to use the “Trim” app."><div class="figcaption">Fig.1. How to use the “Trim” app.</div>
</div>
<p><br></p>
<p>For the downsampling and band-passing examples, we will use the
included “platycleis” Wave, a recording of <em>Platycleis grisea</em>
made by Cesare Brizio in Italy.</p>
</div>
<div class="section level3">
<h3 id="downsample">Downsample<a class="anchor" aria-label="anchor" href="#downsample"></a>
</h3>
<p>This app is based on <code>seewave</code>’s <code><a href="https://rdrr.io/pkg/seewave/man/resamp.html" class="external-link">resamp()</a></code>
function.<br>
If you think the sampling rate used to record an insect was
unnecessarily high, use this app to verify this and downsample if
appropriate. By design, the minimum Nyquist allowed for this in
<code>Rthoptera</code> is 48 kHz. The other two options are 96 kHz, and
125 kHz. For most crickets, 48 kHz Nyquist will suffice, but caution
must be applied. Once the app has launched, select the Wave you want to
analyze and click “Plot”.Now you can assess what is the maximum
frequency of interest (MaxFOI) by hovering over the Mean Power Spectrum.
If the MaxFOI is less than half of the Nyquist (maximum visible
frequency in the plot), you can consider downsampling. Select the
closest available value above the MaxFOI and click “Downsample”.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/launch_app.html">launch_app</a></span><span class="op">(</span><span class="st">"downsample"</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="../reference/figures/downsample.gif" alt="Fig.2. How to use the “Downsample” app."><div class="figcaption">Fig.2. How to use the “Downsample” app.</div>
</div>
<p><br></p>
</div>
<div class="section level3">
<h3 id="band-pass-filter">Band-pass Filter<a class="anchor" aria-label="anchor" href="#band-pass-filter"></a>
</h3>
<p>This app is based on <code>seewave</code>’s <code><a href="https://rdrr.io/pkg/seewave/man/fir.html" class="external-link">fir()</a></code>
(Finite Impulse Response Filter) function. If you believe that your
recording has low-frequency noise or non-target (e.g., other species)
sounds, you should consider applying a band-pass filter (BPF) with the
<code>bandpass_filter</code> app. This app allows you to verify the
presence of non-target sound and its range, helping to choose an
appropriate BPF. A Mean Power Spectrum view should be used to determine
whether a non-target sound or noise is above the -20dB threshold
typically employed to assess the bandwidth of the signal of interest
(SOI). If non-target sound is detected, the user should choose a proper
combination of high-pass filter and low-pass filter values which will
significantly attenuate the sounds below the threshold, allowing for
accurate measure and plot the SOI. Although it takes longer to render,
the spectrogram view may be necessary for field recordings where
multiple species are detected, as it allows for visual discrimination of
the SOI from non-target signals by inspecting their temporal patterns,
which are not visible in the mean power spectrum.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/launch_app.html">launch_app</a></span><span class="op">(</span><span class="st">"bandpass_filter"</span><span class="op">)</span></span></code></pre></div>
<p><img src="../reference/figures/bandpass.gif" alt="Fig.3. How to use the “bandpass_filter” app."><br><br></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Author1.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
